<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<link rel="stylesheet" href="/style.css" />
		<link rel="alternate" type="application/rss+xml" title="RSS Feed for ezhik.jp" href="/feed.xml" />
		<script type="module" src="/script.js"></script>
		<meta name="format-detection" content="telephone=no"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta property="og:type" content="article"> <meta property="og:title" content="Obsidian Note Codes â€“ ezhik.jp"> <meta property="og:description" content="I made a little plugin for Obsidian: Note Codes."> <meta property="og:url" content="https://ezhik.jp/obsidian/note-codes"> <meta property="og:image" content="https://ezhik.jp/assets/thumbnails/obsidian/note-codes.png"><title>Obsidian Note Codes â€“ ezhik.jp</title>
	</head>

	<body>
		<div class="site "><aside class="sidebar"><nav class="links block"><img class="hog" src="/icons/hog.svg" alt="A hedgehog, crudely drawn. I'm just winging it here. If you think you know how to draw a better hedgehog then you do it. Email me if you do."> <ul class="links"><li><a href="/">Home</a></li> <li><a href="mailto:i@ezhik.jp">Email</a></li> <li><a href="https://bsky.app/profile/ezhik.jp">Bluesky</a></li> <li><a rel="me" href="https://mastodon.social/@Ezhik">Mastodon</a></li> <li><a href="https://github.com/silverezhik">GitHub</a></li> <li><a href="/resume.pdf">Resume</a></li> <li><a href="/feed.xml">RSS</a></li></ul></nav> </aside> <main> <article class="block"><h1>Obsidian Note Codes</h1> <h2 class="hogs">ðŸ¦” ðŸ¦” ðŸ¦”</h2> <p>
									<figure>
										<a href="/assets/obsidian/note-codes.png" target="_blank">
											<img src="/assets/thumbnails/obsidian/note-codes.png" alt="Obsidian with the Note Code plugin on the bottom right showing the code for a note about hedgehogs.">
										</a>
										<figcaption>Obsidian with the Note Code plugin on the bottom right showing the code for a note about hedgehogs.</figcaption>
									</figure>
								</p>
<p>I made a little plugin for Obsidian: <a href="https://github.com/SilverEzhik/obsidian-note-codes" class="external">Note Codes</a>.</p>
<p>It will assign a 4-character code to every note in your <a href="/obsidian">Obsidian</a> vault. Those codes let you quickly reference notes in your vault from other places such as hand-written notes.</p>
<p><a href="obsidian://show-plugin?id=note-codes" class="external">Click here to try it out.</a></p>
<p>To make things nicer, there's also a protocol handler, so something like <code>obsidian://note-codes/open?code=XX-XX</code> will open the note with the code <code>XX-XX</code>.</p>
<p>I tried to make these codes look nice even if they are handwritten. They're just four characters and some of the similar-looking ones are removed (though the plugin is smart enough to know that <code>AA-0A</code> is the same as <code>AA-OA</code>.</p>
<p>As usual, it's all open source: <a href="https://github.com/SilverEzhik/obsidian-note-codes" class="external">https://github.com/SilverEzhik/obsidian-note-codes</a></p>
<h1>What's in a note code?</h1>
<p>Note codes are generated based on a note's name and path, meaning that the note code will change if you rename your note.</p>
<p>Each note code consists of 4 alphanumeric characters. For clarity, <code>O</code>, <code>I</code>, <code>L</code>, and <code>U</code> are excluded from the codes, but this plugin will automatically handle these correctly - so <code>OI-LU</code> will automatically be treated as <code>01-1V</code> when searching. Same with the missing dash or lowercase letters.</p>
<p>Note codes are generated by SHA-256-hashing the note's path in the vault, then taking the first 20 bits of the hash and encoding them using <a href="https://www.crockford.com/base32.html" class="external">Douglas Crockford's Base32 encoding scheme</a>.</p>
<p>32^4 = 1,048,576, which is hopefully enough.</p>
<hr>
<h1>Hi Hacker News</h1>
<p>Looks like this extension made it on the orange website: <a href="https://news.ycombinator.com/item?id=45288739" class="external">https://news.ycombinator.com/item?id=45288739</a></p>
<p>I got some interesting feedbackâ€”the first is that probability of note code collisions can be a pretty high due to the <a href="https://en.wikipedia.org/wiki/Birthday_problem" class="external">birthday paradox</a> and the second is that if you rename a note, its code will change.</p>
<p>Both of these are consequences of how I chose to generate note codes. As said above, note codes are generated based off the note's path relative to the vault root. This means that note codes will be as stable as the note's name and path and won't be tied to Obsidian in any wayâ€”generating the note code is as simple as:</p>
<pre><code class="hljs language-python"><span class="keyword">import</span> hashlib

<span class="keyword">def</span> <span class="title function_">hash_string</span>(<span class="params">s</span>):
    h = hashlib.sha256(s.encode()).digest()
    n = ((h[<span class="number">0</span>] &#x3C;&#x3C; <span class="number">16</span>) | (h[<span class="number">1</span>] &#x3C;&#x3C; <span class="number">8</span>) | h[<span class="number">2</span>]) % (<span class="number">32</span>**<span class="number">4</span>)
    a = <span class="string">'0123456789ABCDEFGHJKMNPQRSTVWXYZ'</span>
    r = <span class="string">''</span>.join(a[n // <span class="number">32</span>**(<span class="number">3</span>-i) % <span class="number">32</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>))
    <span class="keyword">return</span> <span class="string">f"<span class="subst">{r[:<span class="number">2</span>]}</span>-<span class="subst">{r[<span class="number">2</span>:]}</span>"</span>
</code></pre>
<p>But it does come at the cost of the note code changing if the note is renamed.</p>
<p>I don't have a good answer to this. I don't think it's a good idea to tie note codes to Obsidian like that, but at the same time, the renaming problem is quite annoyingâ€”after all, Obsidian doesn't (as of me writing this) provide an API to go into the real world and rename every instance of a note name the way it can in the vault. So these note codes are only as stable as a deep link into Obsidian.</p>
<p>So far, I'm contemplating a small improvement on this. I still want to keep note codes as they are, however, I'd like to keep some sort of a vault-specific cache of note codes previously assigned to a note. This way, even if you rename a note, at least within the same vault, you'd still be able to access it via its previous note codes.</p>
<p>As for the birthday paradox, oops. I think ultimately it's not a critical issue. The worst case scenario here is that you'll look up a note code and then see multiple matches in the search panel. I honestly don't think this one can be solved any other way besides tying note codes to the Obsidian vault. Is it worth it? You tell me.</p> <h2 class="hogs">ðŸ¦” ðŸ¦” ðŸ¦”</h2> <center><sub><time>2025-09-13</time>  â€¢ <a class="external" href="https://mastodon.social/@Ezhik/115192598155635839">Discuss on Mastodon</a> â€¢ <a class="external" href="https://bsky.app/profile/ezhik.jp/post/3lyntckcwvc2i">Discuss on Bluesky</a></sub></center></article></main></div> 
	</body>
</html>

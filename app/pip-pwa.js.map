{
  "version": 3,
  "file": "pip-pwa.js",
  "sources": [
    "/app/pip-pwa.ts"
  ],
  "sourcesContent": [
    "import { h } from \"./lib/userscript\";\n\nexport default function init(el) {\n\t// const metaIcon = h(\"link\", {\n\t// \trel: \"apple-touch-icon\",\n\t// \thref: \"/favicon.png\",\n\t// });\n\t// document.head.append(metaIcon);\n\t// const metaWebAppCapable = h(\"meta\", {\n\t// \tname: \"apple-mobile-web-app-capable\",\n\t// \tcontent: \"yes\",\n\t// });\n\t// document.head.append(metaWebAppCapable);\n\n\t// const appName = \"Play in PiP\";\n\t// const metaWebAppTitle = h(\"meta\", {\n\t// \tname: \"apple-mobile-web-app-title\",\n\t// \tcontent: appName,\n\t// });\n\t// document.head.append(metaWebAppTitle);\n\t// const metaApplicationName = h(\"meta\", {\n\t// \tname: \"application-name\",\n\t// \tcontent: appName,\n\t// });\n\t// document.head.append(metaApplicationName);\n\n\tconst input = h(\"input\", { type: \"file\", accept: \"video/*\" });\n\tel.append(input);\n\n\tconst videoContainer = h(\"div\", { className: \"video-container\" });\n\tel.append(videoContainer);\n\tconst video = h(\"video\", {\n\t\tcontrols: true,\n\t\tsrc: \"/assets/spinning-hogs.mp4\",\n\t\tloop: true,\n\t\tautoplay: true,\n\t});\n\tel.append(video);\n\tvideo.play();\n\n\tlet loadedFirst = false;\n\tinput.addEventListener(\"change\", () => {\n\t\tconst file = input.files?.[0];\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\t\tconst url = URL.createObjectURL(file);\n\t\tvideo.src = url;\n\t\tvideo.play();\n\t\ttry {\n\t\t\tvideo.requestPictureInPicture();\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\n\t\tif (loadedFirst) {\n\t\t\tvideo.loop = false;\n\t\t\tloadedFirst = true;\n\t\t}\n\t});\n\n\tdocument.addEventListener(\"dragover\", (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(\"dragover\");\n\t});\n\tdocument.addEventListener(\"drop\", (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(\"drop\");\n\t\tif (e.dataTransfer?.files?.length) {\n\t\t\tinput.files = e.dataTransfer?.files;\n\t\t\tinput.dispatchEvent(new Event(\"change\"));\n\t\t}\n\t});\n}\n"
  ],
  "names": [],
  "mappings": ";AAEA,SAAwB,KAAK,IAAI;AAwB1B,QAAA,QAAQ,EAAE,SAAS,EAAE,MAAM,QAAQ,QAAQ,WAAW;AAC5D,KAAG,OAAO,KAAK;AAEf,QAAM,iBAAiB,EAAE,OAAO,EAAE,WAAW,mBAAmB;AAChE,KAAG,OAAO,cAAc;AAClB,QAAA,QAAQ,EAAE,SAAS;AAAA,IACxB,UAAU;AAAA,IACV,KAAK;AAAA,IACL,MAAM;AAAA,IACN,UAAU;AAAA,EAAA,CACV;AACD,KAAG,OAAO,KAAK;AACf,QAAM,KAAK;AAGL,QAAA,iBAAiB,UAAU,MAAM;AAChC,UAAA,OAAO,MAAM,QAAQ,CAAC;AAC5B,QAAI,CAAC,MAAM;AACV;AAAA,IAAA;AAEK,UAAA,MAAM,IAAI,gBAAgB,IAAI;AACpC,UAAM,MAAM;AACZ,UAAM,KAAK;AACP,QAAA;AACH,YAAM,wBAAwB;AAAA,aACtB,GAAG;AACX,cAAQ,MAAM,CAAC;AAAA,IAAA;AAAA,EAMhB,CACA;AAEQ,WAAA,iBAAiB,YAAY,CAAC,MAAM;AAC5C,MAAE,eAAe;AACjB,YAAQ,IAAI,UAAU;AAAA,EAAA,CACtB;AACQ,WAAA,iBAAiB,QAAQ,CAAC,MAAM;AACxC,MAAE,eAAe;AACjB,YAAQ,IAAI,MAAM;AACd,QAAA,EAAE,cAAc,OAAO,QAAQ;AAC5B,YAAA,QAAQ,EAAE,cAAc;AAC9B,YAAM,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,IAAA;AAAA,EACxC,CACA;AACF;"
}